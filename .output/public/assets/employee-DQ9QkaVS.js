import{c as ve,j as t,R as U,C as q,a as m,b as P,X as je,T as V,P as K,O as H,r as i,d as G,e as Ce,f as N,W as ye,g as W,h as R,i as ke,D as Ae,k as X,l as De,m as T,n as Ne,o as we,t as _,B as Se,p as Ee}from"./main-BtLxr4tB.js";import{m as _e,n as Re,u as Y,o as Pe,b as Te,a as Ie,p as Fe,f as Be,D as Oe,g as Me,q as ze,F as B,c as O,I as M,d as z,i as $e,T as Le,h as Ue,C as qe,j as y,r as Ve,k as Ke}from"./use-client-table-BVAkiO6t.js";import"./plugin-Cep3T2hQ.js";const He=[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M22 19h-6",key:"vcuq98"}]],Ge=ve("user-round-plus",He);function We({...e}){return t.jsx(U,{"data-slot":"dialog",...e})}function Xe({...e}){return t.jsx(K,{"data-slot":"dialog-portal",...e})}function Ye({className:e,...a}){return t.jsx(H,{"data-slot":"dialog-overlay",className:m("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function Qe({className:e,children:a,showCloseButton:o=!0,...s}){return t.jsxs(Xe,{"data-slot":"dialog-portal",children:[t.jsx(Ye,{}),t.jsxs(q,{"data-slot":"dialog-content",className:m("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...s,children:[a,o&&t.jsxs(P,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[t.jsx(je,{}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Je({className:e,...a}){return t.jsx("div",{"data-slot":"dialog-header",className:m("flex flex-col gap-2 text-center sm:text-left",e),...a})}function Ze({className:e,...a}){return t.jsx(V,{"data-slot":"dialog-title",className:m("text-lg leading-none font-semibold",e),...a})}var Q="AlertDialog",[et]=W(Q,[G]),b=G(),J=e=>{const{__scopeAlertDialog:a,...o}=e,s=b(a);return t.jsx(U,{...s,...o,modal:!0})};J.displayName=Q;var tt="AlertDialogTrigger",Z=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...s}=e,l=b(o);return t.jsx(Ce,{...l,...s,ref:a})});Z.displayName=tt;var at="AlertDialogPortal",ee=e=>{const{__scopeAlertDialog:a,...o}=e,s=b(a);return t.jsx(K,{...s,...o})};ee.displayName=at;var ot="AlertDialogOverlay",te=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...s}=e,l=b(o);return t.jsx(H,{...l,...s,ref:a})});te.displayName=ot;var k="AlertDialogContent",[rt,nt]=et(k),st=ke("AlertDialogContent"),ae=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,children:s,...l}=e,n=b(o),d=i.useRef(null),u=N(a,d),r=i.useRef(null);return t.jsx(ye,{contentName:k,titleName:oe,docsSlug:"alert-dialog",children:t.jsx(rt,{scope:o,cancelRef:r,children:t.jsxs(q,{role:"alertdialog",...n,...l,ref:u,onOpenAutoFocus:R(l.onOpenAutoFocus,c=>{c.preventDefault(),r.current?.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[t.jsx(st,{children:s}),t.jsx(ct,{contentRef:d})]})})})});ae.displayName=k;var oe="AlertDialogTitle",re=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...s}=e,l=b(o);return t.jsx(V,{...l,...s,ref:a})});re.displayName=oe;var ne="AlertDialogDescription",lt=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...s}=e,l=b(o);return t.jsx(Ae,{...l,...s,ref:a})});lt.displayName=ne;var it="AlertDialogAction",se=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...s}=e,l=b(o);return t.jsx(P,{...l,...s,ref:a})});se.displayName=it;var le="AlertDialogCancel",ie=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...s}=e,{cancelRef:l}=nt(le,o),n=b(o),d=N(a,l);return t.jsx(P,{...n,...s,ref:d})});ie.displayName=le;var ct=({contentRef:e})=>{const a=`\`${k}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${k}\` by passing a \`${ne}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${k}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,e]),null},dt=J,ut=Z,pt=ee,gt=te,mt=ae,ht=se,ft=ie,xt=re;function bt({...e}){return t.jsx(dt,{"data-slot":"alert-dialog",...e})}function vt({...e}){return t.jsx(ut,{"data-slot":"alert-dialog-trigger",...e})}function jt({...e}){return t.jsx(pt,{"data-slot":"alert-dialog-portal",...e})}function Ct({className:e,...a}){return t.jsx(gt,{"data-slot":"alert-dialog-overlay",className:m("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function yt({className:e,...a}){return t.jsxs(jt,{children:[t.jsx(Ct,{}),t.jsx(mt,{"data-slot":"alert-dialog-content",className:m("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...a})]})}function kt({className:e,...a}){return t.jsx("div",{"data-slot":"alert-dialog-header",className:m("flex flex-col gap-2 text-center sm:text-left",e),...a})}function At({className:e,...a}){return t.jsx("div",{"data-slot":"alert-dialog-footer",className:m("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function Dt({className:e,...a}){return t.jsx(xt,{"data-slot":"alert-dialog-title",className:m("text-lg font-semibold",e),...a})}function $({className:e,...a}){return t.jsx(ht,{className:m(X(),e),...a})}function Nt({className:e,...a}){return t.jsx(ft,{className:m(X({variant:"outline"}),e),...a})}var w="Checkbox",[wt]=W(w),[St,I]=wt(w);function Et(e){const{__scopeCheckbox:a,checked:o,children:s,defaultChecked:l,disabled:n,form:d,name:u,onCheckedChange:r,required:c,value:h="on",internal_do_not_use_render:f}=e,[x,A]=Ne({prop:o,defaultProp:l??!1,onChange:r,caller:w}),[j,C]=i.useState(null),[D,p]=i.useState(null),g=i.useRef(!1),S=j?!!d||!!j.closest("form"):!0,E={checked:x,disabled:n,setChecked:A,control:j,setControl:C,name:u,form:d,value:h,hasConsumerStoppedPropagationRef:g,required:c,defaultChecked:v(l)?!1:l,isFormControl:S,bubbleInput:D,setBubbleInput:p};return t.jsx(St,{scope:a,...E,children:_t(f)?f(E):s})}var ce="CheckboxTrigger",de=i.forwardRef(({__scopeCheckbox:e,onKeyDown:a,onClick:o,...s},l)=>{const{control:n,value:d,disabled:u,checked:r,required:c,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:x,isFormControl:A,bubbleInput:j}=I(ce,e),C=N(l,h),D=i.useRef(r);return i.useEffect(()=>{const p=n?.form;if(p){const g=()=>f(D.current);return p.addEventListener("reset",g),()=>p.removeEventListener("reset",g)}},[n,f]),t.jsx(T.button,{type:"button",role:"checkbox","aria-checked":v(r)?"mixed":r,"aria-required":c,"data-state":fe(r),"data-disabled":u?"":void 0,disabled:u,value:d,...s,ref:C,onKeyDown:R(a,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:R(o,p=>{f(g=>v(g)?!0:!g),j&&A&&(x.current=p.isPropagationStopped(),x.current||p.stopPropagation())})})});de.displayName=ce;var ue=i.forwardRef((e,a)=>{const{__scopeCheckbox:o,name:s,checked:l,defaultChecked:n,required:d,disabled:u,value:r,onCheckedChange:c,form:h,...f}=e;return t.jsx(Et,{__scopeCheckbox:o,checked:l,defaultChecked:n,disabled:u,required:d,onCheckedChange:c,name:s,form:h,value:r,internal_do_not_use_render:({isFormControl:x})=>t.jsxs(t.Fragment,{children:[t.jsx(de,{...f,ref:a,__scopeCheckbox:o}),x&&t.jsx(he,{__scopeCheckbox:o})]})})});ue.displayName=w;var pe="CheckboxIndicator",ge=i.forwardRef((e,a)=>{const{__scopeCheckbox:o,forceMount:s,...l}=e,n=I(pe,o);return t.jsx(De,{present:s||v(n.checked)||n.checked===!0,children:t.jsx(T.span,{"data-state":fe(n.checked),"data-disabled":n.disabled?"":void 0,...l,ref:a,style:{pointerEvents:"none",...e.style}})})});ge.displayName=pe;var me="CheckboxBubbleInput",he=i.forwardRef(({__scopeCheckbox:e,...a},o)=>{const{control:s,hasConsumerStoppedPropagationRef:l,checked:n,defaultChecked:d,required:u,disabled:r,name:c,value:h,form:f,bubbleInput:x,setBubbleInput:A}=I(me,e),j=N(o,A),C=_e(n),D=we(s);i.useEffect(()=>{const g=x;if(!g)return;const S=window.HTMLInputElement.prototype,F=Object.getOwnPropertyDescriptor(S,"checked").set,xe=!l.current;if(C!==n&&F){const be=new Event("click",{bubbles:xe});g.indeterminate=v(n),F.call(g,v(n)?!1:n),g.dispatchEvent(be)}},[x,C,n,l]);const p=i.useRef(v(n)?!1:n);return t.jsx(T.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??p.current,required:u,disabled:r,name:c,value:h,form:f,...a,tabIndex:-1,ref:j,style:{...a.style,...D,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});he.displayName=me;function _t(e){return typeof e=="function"}function v(e){return e==="indeterminate"}function fe(e){return v(e)?"indeterminate":e?"checked":"unchecked"}function L({className:e,...a}){return t.jsx(ue,{"data-slot":"checkbox",className:m("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:t.jsx(ge,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:t.jsx(Re,{className:"size-3.5"})})})}function Rt(){return[{id:"select",header:({table:e})=>e.getCoreRowModel().rows.some(o=>!o.original.barcodeUrl)?t.jsx(L,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:o=>e.toggleAllPageRowsSelected(!!o),"aria-label":"Select all",className:"translate-y-[2px] mb-2"}):null,cell:({row:e})=>e.original.barcodeUrl?null:t.jsx(L,{checked:e.getIsSelected(),onCheckedChange:o=>e.toggleSelected(!!o),"aria-label":"Select row",className:"translate-y-[2px] mb-2"}),minSize:30,maxSize:30,enableResizing:!1,enablePinning:!1,enableSorting:!1,enableHiding:!1},{accessorKey:"no",header:({column:e})=>t.jsx(y,{column:e,title:"No"}),cell:({row:e})=>t.jsx("div",{children:e.index+1}),minSize:40,maxSize:40,enableSorting:!1,enablePinning:!1,enableHiding:!1},{id:"name",accessorKey:"name",header:({column:e})=>t.jsx(y,{column:e,title:"Name"}),cell:({row:e})=>t.jsx("div",{children:e.getValue("name")}),meta:{label:"Name",placeholder:"Search Name...",variant:"text",icon:Le},filterFn:$e,enableColumnFilter:!0},{accessorKey:"position",header:({column:e})=>t.jsx(y,{column:e,title:"Instansi"}),cell:({row:e})=>t.jsx("div",{children:e.getValue("position")})},{accessorKey:"badge",header:({column:e})=>t.jsx(y,{column:e,title:"Badge"}),cell:({row:e})=>t.jsx("div",{children:e.getValue("badge")})},{id:"barcodeUrl",accessorKey:"barcodeUrl",header:({column:e})=>t.jsx(y,{column:e,title:"Barcode"}),cell:({row:e})=>{const a=e.getValue("barcodeUrl");if(!a)return null;const o=`${a}`,s=()=>{const n=document.createElement("a");n.href=o;const d=typeof a=="string"&&a.split&&a.split("/").pop()||"barcode.png";n.download=d,n.click()},l=()=>{const n=window.open("","_blank");n&&(n.document.write(`
					<html>
						<head><title>Print Barcode</title></head>
						<body style="text-align:center;">
						<img src="${o}" style="width:600px;height:700px;" />
						<script>window.print(); window.close();<\/script>
						</body>
					</html>`),n.document.close())};return t.jsxs(bt,{children:[t.jsx(vt,{asChild:!0,className:"flex items-center justify-center cursor-pointer",title:"Click to view barcode",children:t.jsx("img",{src:`${a}`,alt:"Barcode",width:100,height:100,className:"w-10 h-10 object-cover"})}),t.jsxs(yt,{className:"w-fit h-fit",children:[t.jsx(kt,{children:t.jsx(Dt,{children:"Print Barcode"})}),t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("img",{src:o,alt:"Barcode",width:200,height:200,className:"w-[200px] h-[200px]r"})}),t.jsxs(At,{children:[t.jsx($,{onClick:s,children:"Download"}),t.jsx($,{onClick:l,children:"Print"}),t.jsx(Nt,{children:"Cancel"})]})]})]})},minSize:100,maxSize:100},{id:"createdAt",accessorKey:"createdAt",header:({column:e})=>t.jsx(y,{column:e,title:"Created At"}),cell:({row:e})=>t.jsx("div",{children:Ee(e.getValue("createdAt"))}),meta:{label:"Created At",placeholder:"Search Created At...",variant:"dateRange",icon:qe},filterFn:Ue,enableColumnFilter:!0}]}function Pt({data:e}){const[a,o]=i.useState(!1),s=Y(Pe),{mutateAsync:l}=Te({mutationFn:s,onSuccess:()=>{_.success("Employee created successfully"),n.reset(),o(!1)},onError:()=>{_.error("Failed to create employee")}}),n=Ie({defaultValues:{name:"",position:""},validators:{onBlur:Fe},onSubmit:async({value:r})=>{_.promise(l({data:r}),{loading:"Creating employee...",success:"Employee created successfully",error:"Failed to create employee"})}}),d=i.useMemo(()=>Rt(),[]),{table:u}=Be({initialState:{columnPinning:{right:["barcodeUrl"]}},defaultColumn:{minSize:160},data:e,columns:d,getRowId:r=>r.id,enableRowSelection:r=>!r.original.barcodeUrl});return t.jsxs("div",{className:"w-full",children:[t.jsx(Oe,{className:"min-h-[570px] py-3",table:u,children:t.jsx(Me,{table:u,children:t.jsxs(Se,{onClick:()=>o(!0),variant:"outline",size:"sm",className:"h-8",children:["Create New",t.jsx(Ge,{className:"ml-2 h-4 w-4"})]})})}),t.jsx(We,{open:a,onOpenChange:o,children:t.jsxs(Qe,{children:[t.jsx(Je,{children:t.jsx(Ze,{children:"Create New Employee"})}),t.jsx("form",{onSubmit:r=>{r.preventDefault(),n.handleSubmit()},children:t.jsxs(ze,{children:[t.jsx(n.Field,{name:"name",children:r=>{const c=r.state.meta.isTouched&&!r.state.meta.isValid;return t.jsxs(B,{"data-invalid":c,children:[t.jsx(O,{htmlFor:r.name,children:"Name"}),t.jsx(M,{id:r.name,name:r.name,value:r.state.value,onBlur:r.handleBlur,onChange:h=>r.handleChange(h.target.value),"aria-invalid":c,placeholder:"Enter name",autoComplete:"off"}),c&&t.jsx(z,{errors:r.state.meta.errors})]})}}),t.jsx(n.Field,{name:"position",children:r=>{const c=r.state.meta.isTouched&&!r.state.meta.isValid;return t.jsxs(B,{"data-invalid":c,children:[t.jsx(O,{htmlFor:r.name,children:"Instansi"}),t.jsx(M,{id:r.name,name:r.name,value:r.state.value,onBlur:r.handleBlur,onChange:h=>r.handleChange(h.target.value),"aria-invalid":c,placeholder:"Enter position",autoComplete:"off"}),c&&t.jsx(z,{errors:r.state.meta.errors})]})}})]})})]})})]})}function Bt(){const e=Y(Ve),{data:a,isLoading:o}=Ke({queryKey:["employees"],queryFn:()=>e()});return o?t.jsx("div",{children:"Loading..."}):t.jsx(Pt,{data:a??[]})}export{Bt as component};
