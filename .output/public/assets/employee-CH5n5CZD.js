import{c as Ce,j as t,R as H,C as G,a as h,b as F,X as Ae,T as W,P as Q,O as X,B as E,r as i,d as Y,e as De,f as S,W as ke,g as J,h as I,i as we,D as Ee,k as Z,l as Ne,m as M,n as Se,o as Re,u as _e,t as C,p as Pe}from"./main-DxtvtzDV.js";import{m as Te,n as Ie,E as Fe,o as Me,p as B,q as ze,r as Oe,t as Be,v as $e,u as N,w as Ue,x as qe,y as Le,b as T,a as Ke,U as Ve,A as He,f as Ge,D as We,g as Qe,B as Xe,F as $,c as U,I as q,d as L,i as Ye,T as Je,h as Ze,C as et,j as k,G as tt,k as at}from"./use-client-table-BFvYZNK4.js";const ot=[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M22 19h-6",key:"vcuq98"}]],rt=Ce("user-round-plus",ot);function nt({...e}){return t.jsx(H,{"data-slot":"dialog",...e})}function st({...e}){return t.jsx(Q,{"data-slot":"dialog-portal",...e})}function lt({className:e,...a}){return t.jsx(X,{"data-slot":"dialog-overlay",className:h("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function it({className:e,children:a,showCloseButton:o=!0,...n}){return t.jsxs(st,{"data-slot":"dialog-portal",children:[t.jsx(lt,{}),t.jsxs(G,{"data-slot":"dialog-content",className:h("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[a,o&&t.jsxs(F,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[t.jsx(Ae,{}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ct({className:e,...a}){return t.jsx("div",{"data-slot":"dialog-header",className:h("flex flex-col gap-2 text-center sm:text-left",e),...a})}function dt({className:e,...a}){return t.jsx("div",{"data-slot":"dialog-footer",className:h("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function ut({className:e,...a}){return t.jsx(W,{"data-slot":"dialog-title",className:h("text-lg leading-none font-semibold",e),...a})}function pt({row:e,table:a}){const o=a.options.meta;function n({action:s}){if(!o?.rowActions)throw new Error("rowActions function is required");s==="delete"&&o.rowActions({row:e,variant:"delete"}),s==="edit"&&o.rowActions({row:e,variant:"edit"})}return t.jsxs(Te,{children:[t.jsx(Ie,{asChild:!0,children:t.jsxs(E,{variant:"ghost",size:"icon",className:"data-[state=open]:bg-muted size-8",children:[t.jsx(Fe,{}),t.jsx("span",{className:"sr-only",children:"Open menu"})]})}),t.jsxs(Me,{align:"end",className:"w-[160px]",children:[t.jsx(B,{onClick:()=>n({action:"edit"}),children:"Edit"}),t.jsx(ze,{}),t.jsxs(B,{variant:"destructive",onClick:()=>n({action:"delete"}),children:["Delete",t.jsx(Oe,{children:"⌘⌫"})]})]})]})}var ee="AlertDialog",[mt]=J(ee,[Y]),j=Y(),te=e=>{const{__scopeAlertDialog:a,...o}=e,n=j(a);return t.jsx(H,{...n,...o,modal:!0})};te.displayName=ee;var gt="AlertDialogTrigger",ae=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...n}=e,s=j(o);return t.jsx(De,{...s,...n,ref:a})});ae.displayName=gt;var ht="AlertDialogPortal",oe=e=>{const{__scopeAlertDialog:a,...o}=e,n=j(a);return t.jsx(Q,{...n,...o})};oe.displayName=ht;var ft="AlertDialogOverlay",re=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...n}=e,s=j(o);return t.jsx(X,{...s,...n,ref:a})});re.displayName=ft;var w="AlertDialogContent",[xt,bt]=mt(w),vt=we("AlertDialogContent"),ne=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,children:n,...s}=e,l=j(o),c=i.useRef(null),f=S(a,c),u=i.useRef(null);return t.jsx(ke,{contentName:w,titleName:se,docsSlug:"alert-dialog",children:t.jsx(xt,{scope:o,cancelRef:u,children:t.jsxs(G,{role:"alertdialog",...l,...s,ref:f,onOpenAutoFocus:I(s.onOpenAutoFocus,p=>{p.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[t.jsx(vt,{children:n}),t.jsx(Ct,{contentRef:c})]})})})});ne.displayName=w;var se="AlertDialogTitle",le=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...n}=e,s=j(o);return t.jsx(W,{...s,...n,ref:a})});le.displayName=se;var ie="AlertDialogDescription",yt=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...n}=e,s=j(o);return t.jsx(Ee,{...s,...n,ref:a})});yt.displayName=ie;var jt="AlertDialogAction",ce=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...n}=e,s=j(o);return t.jsx(F,{...s,...n,ref:a})});ce.displayName=jt;var de="AlertDialogCancel",ue=i.forwardRef((e,a)=>{const{__scopeAlertDialog:o,...n}=e,{cancelRef:s}=bt(de,o),l=j(o),c=S(a,s);return t.jsx(F,{...l,...n,ref:c})});ue.displayName=de;var Ct=({contentRef:e})=>{const a=`\`${w}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${w}\` by passing a \`${ie}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${w}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,e]),null},At=te,Dt=ae,kt=oe,wt=re,Et=ne,Nt=ce,St=ue,Rt=le;function _t({...e}){return t.jsx(At,{"data-slot":"alert-dialog",...e})}function Pt({...e}){return t.jsx(Dt,{"data-slot":"alert-dialog-trigger",...e})}function Tt({...e}){return t.jsx(kt,{"data-slot":"alert-dialog-portal",...e})}function It({className:e,...a}){return t.jsx(wt,{"data-slot":"alert-dialog-overlay",className:h("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function Ft({className:e,...a}){return t.jsxs(Tt,{children:[t.jsx(It,{}),t.jsx(Et,{"data-slot":"alert-dialog-content",className:h("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...a})]})}function Mt({className:e,...a}){return t.jsx("div",{"data-slot":"alert-dialog-header",className:h("flex flex-col gap-2 text-center sm:text-left",e),...a})}function zt({className:e,...a}){return t.jsx("div",{"data-slot":"alert-dialog-footer",className:h("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function Ot({className:e,...a}){return t.jsx(Rt,{"data-slot":"alert-dialog-title",className:h("text-lg font-semibold",e),...a})}function K({className:e,...a}){return t.jsx(Nt,{className:h(Z(),e),...a})}function Bt({className:e,...a}){return t.jsx(St,{className:h(Z({variant:"outline"}),e),...a})}var R="Checkbox",[$t]=J(R),[Ut,z]=$t(R);function qt(e){const{__scopeCheckbox:a,checked:o,children:n,defaultChecked:s,disabled:l,form:c,name:f,onCheckedChange:u,required:p,value:y="on",internal_do_not_use_render:x}=e,[m,D]=Se({prop:o,defaultProp:s??!1,onChange:u,caller:R}),[v,r]=i.useState(null),[g,d]=i.useState(null),b=i.useRef(!1),_=v?!!c||!!v.closest("form"):!0,P={checked:m,disabled:l,setChecked:D,control:v,setControl:r,name:f,form:c,value:y,hasConsumerStoppedPropagationRef:b,required:p,defaultChecked:A(s)?!1:s,isFormControl:_,bubbleInput:g,setBubbleInput:d};return t.jsx(Ut,{scope:a,...P,children:Lt(x)?x(P):n})}var pe="CheckboxTrigger",me=i.forwardRef(({__scopeCheckbox:e,onKeyDown:a,onClick:o,...n},s)=>{const{control:l,value:c,disabled:f,checked:u,required:p,setControl:y,setChecked:x,hasConsumerStoppedPropagationRef:m,isFormControl:D,bubbleInput:v}=z(pe,e),r=S(s,y),g=i.useRef(u);return i.useEffect(()=>{const d=l?.form;if(d){const b=()=>x(g.current);return d.addEventListener("reset",b),()=>d.removeEventListener("reset",b)}},[l,x]),t.jsx(M.button,{type:"button",role:"checkbox","aria-checked":A(u)?"mixed":u,"aria-required":p,"data-state":ve(u),"data-disabled":f?"":void 0,disabled:f,value:c,...n,ref:r,onKeyDown:I(a,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:I(o,d=>{x(b=>A(b)?!0:!b),v&&D&&(m.current=d.isPropagationStopped(),m.current||d.stopPropagation())})})});me.displayName=pe;var ge=i.forwardRef((e,a)=>{const{__scopeCheckbox:o,name:n,checked:s,defaultChecked:l,required:c,disabled:f,value:u,onCheckedChange:p,form:y,...x}=e;return t.jsx(qt,{__scopeCheckbox:o,checked:s,defaultChecked:l,disabled:f,required:c,onCheckedChange:p,name:n,form:y,value:u,internal_do_not_use_render:({isFormControl:m})=>t.jsxs(t.Fragment,{children:[t.jsx(me,{...x,ref:a,__scopeCheckbox:o}),m&&t.jsx(be,{__scopeCheckbox:o})]})})});ge.displayName=R;var he="CheckboxIndicator",fe=i.forwardRef((e,a)=>{const{__scopeCheckbox:o,forceMount:n,...s}=e,l=z(he,o);return t.jsx(Ne,{present:n||A(l.checked)||l.checked===!0,children:t.jsx(M.span,{"data-state":ve(l.checked),"data-disabled":l.disabled?"":void 0,...s,ref:a,style:{pointerEvents:"none",...e.style}})})});fe.displayName=he;var xe="CheckboxBubbleInput",be=i.forwardRef(({__scopeCheckbox:e,...a},o)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:l,defaultChecked:c,required:f,disabled:u,name:p,value:y,form:x,bubbleInput:m,setBubbleInput:D}=z(xe,e),v=S(o,D),r=Be(l),g=Re(n);i.useEffect(()=>{const b=m;if(!b)return;const _=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(_,"checked").set,ye=!s.current;if(r!==l&&O){const je=new Event("click",{bubbles:ye});b.indeterminate=A(l),O.call(b,A(l)?!1:l),b.dispatchEvent(je)}},[m,r,l,s]);const d=i.useRef(A(l)?!1:l);return t.jsx(M.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??d.current,required:f,disabled:u,name:p,value:y,form:x,...a,tabIndex:-1,ref:v,style:{...a.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});be.displayName=xe;function Lt(e){return typeof e=="function"}function A(e){return e==="indeterminate"}function ve(e){return A(e)?"indeterminate":e?"checked":"unchecked"}function V({className:e,...a}){return t.jsx(ge,{"data-slot":"checkbox",className:h("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:t.jsx(fe,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:t.jsx($e,{className:"size-3.5"})})})}function Kt(){return[{id:"select",header:({table:e})=>e.getCoreRowModel().rows.some(o=>!o.original.barcodeUrl)?t.jsx(V,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:o=>e.toggleAllPageRowsSelected(!!o),"aria-label":"Select all",className:"translate-y-[2px] mb-2"}):null,cell:({row:e})=>e.original.barcodeUrl?null:t.jsx(V,{checked:e.getIsSelected(),onCheckedChange:o=>e.toggleSelected(!!o),"aria-label":"Select row",className:"translate-y-[2px] mb-2"}),minSize:30,maxSize:30,enableResizing:!1,enablePinning:!1,enableSorting:!1,enableHiding:!1},{accessorKey:"no",header:({column:e})=>t.jsx(k,{column:e,title:"No"}),cell:({row:e})=>t.jsx("div",{children:e.index+1}),minSize:40,maxSize:40,enableSorting:!1,enablePinning:!1,enableHiding:!1},{id:"name",accessorKey:"name",header:({column:e})=>t.jsx(k,{column:e,title:"Name"}),cell:({row:e})=>t.jsx("div",{children:e.getValue("name")}),meta:{label:"Name",placeholder:"Search Name...",variant:"text",icon:Je},filterFn:Ye,enableColumnFilter:!0},{accessorKey:"position",header:({column:e})=>t.jsx(k,{column:e,title:"Instansi"}),cell:({row:e})=>t.jsx("div",{children:e.getValue("position")})},{accessorKey:"badge",header:({column:e})=>t.jsx(k,{column:e,title:"Badge"}),cell:({row:e})=>t.jsx("div",{children:e.getValue("badge")})},{id:"barcodeUrl",accessorKey:"barcodeUrl",header:({column:e})=>t.jsx(k,{column:e,title:"Barcode"}),cell:({row:e})=>{const a=e.getValue("barcodeUrl");if(!a)return null;const o=`${a}`,n=()=>{const l=document.createElement("a");l.href=o;const c=typeof a=="string"&&a.split&&a.split("/").pop()||"barcode.png";l.download=c,l.click()},s=()=>{const l=window.open("","_blank");l&&(l.document.write(`
					<html>
						<head><title>Print Barcode</title></head>
						<body style="text-align:center;">
						<img src="${o}" style="width:600px;height:700px;" />
						<script>window.print(); window.close();<\/script>
						</body>
					</html>`),l.document.close())};return t.jsxs(_t,{children:[t.jsx(Pt,{asChild:!0,className:"flex items-center justify-center cursor-pointer",title:"Click to view barcode",children:t.jsx("img",{src:`${a}`,alt:"Barcode",width:100,height:100,className:"w-10 h-10 object-cover"})}),t.jsxs(Ft,{className:"w-fit h-fit",children:[t.jsx(Mt,{children:t.jsx(Ot,{children:"Print Barcode"})}),t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("img",{src:o,alt:"Barcode",width:200,height:200,className:"w-[200px] h-[200px]r"})}),t.jsxs(zt,{children:[t.jsx(K,{onClick:n,children:"Download"}),t.jsx(K,{onClick:s,children:"Print"}),t.jsx(Bt,{children:"Cancel"})]})]})]})},minSize:100,maxSize:100},{id:"createdAt",accessorKey:"createdAt",header:({column:e})=>t.jsx(k,{column:e,title:"Created At"}),cell:({row:e})=>t.jsx("div",{children:Pe(e.getValue("createdAt"))}),meta:{label:"Created At",placeholder:"Search Created At...",variant:"dateRange",icon:et},filterFn:Ze,enableColumnFilter:!0},{id:"actions",cell:({row:e,table:a})=>t.jsx(pt,{table:a,row:e}),minSize:50,maxSize:50,enableResizing:!1,enableHiding:!1}]}function Vt({data:e}){const[a,o]=i.useState(!1),[n,s]=i.useState(null),l=N(Ue),c=N(qe),f=N(Le),u=_e(),{mutateAsync:p}=T({mutationFn:f,onSuccess:()=>{C.success("Employee updated successfully")},onError:()=>{C.error("Failed to update employee")}}),{mutateAsync:y}=T({mutationFn:c,onSuccess:()=>{C.success("Employee deleted successfully"),u.invalidateQueries({queryKey:["employees"]})},onError:()=>{C.error("Failed to delete employee")}}),{mutateAsync:x}=T({mutationFn:l,onSuccess:()=>{C.success("Employee created successfully")},onError:()=>{C.error("Failed to create employee")}}),m=Ke({defaultValues:{name:n?.name||"",position:n?.position||""},validators:{onSubmit:n?Ve.omit({id:!0}):He},onSubmit:async({value:r})=>{n?C.promise(p({data:{...r,id:n.id}}),{loading:"Updating employee...",success:"Employee updated successfully",error:"Failed to update employee"}):C.promise(x({data:r}),{loading:"Creating employee...",success:"Employee created successfully",error:"Failed to create employee"}),o(!1),s(null),m.reset(),u.invalidateQueries({queryKey:["employees"]})}}),D=i.useMemo(()=>Kt(),[]),{table:v}=Ge({initialState:{columnPinning:{right:["barcodeUrl","actions"]}},defaultColumn:{minSize:160},data:e,columns:D,getRowId:r=>r.id,enableRowSelection:r=>!r.original.barcodeUrl,rowActions(r){r.variant==="edit"?(s(r.row.original),o(!0)):r.variant==="delete"&&y({data:r.row.original})}});return t.jsxs("div",{className:"w-full",children:[t.jsx(We,{className:"min-h-[570px] py-3",table:v,children:t.jsx(Qe,{table:v,children:t.jsxs(E,{onClick:()=>o(!0),variant:"outline",size:"sm",className:"h-8",children:["Create New",t.jsx(rt,{className:"ml-2 h-4 w-4"})]})})}),t.jsx(nt,{open:a,onOpenChange:o,children:t.jsxs(it,{children:[t.jsx(ct,{children:t.jsx(ut,{children:n?"Edit Employee":"Create New Employee"})}),t.jsx("form",{id:`employee-form-${n?.id||"new"}`,onSubmit:r=>{r.preventDefault(),m.handleSubmit()},children:t.jsxs(Xe,{children:[t.jsx(m.Field,{name:"name",children:r=>{const g=r.state.meta.isTouched&&!r.state.meta.isValid;return t.jsxs($,{"data-invalid":g,children:[t.jsx(U,{htmlFor:r.name,children:"Name"}),t.jsx(q,{id:r.name,name:r.name,value:r.state.value,onBlur:r.handleBlur,onChange:d=>r.handleChange(d.target.value),"aria-invalid":g,placeholder:"Enter name",autoComplete:"off"}),g&&t.jsx(L,{errors:r.state.meta.errors})]})}}),t.jsx(m.Field,{name:"position",children:r=>{const g=r.state.meta.isTouched&&!r.state.meta.isValid;return t.jsxs($,{"data-invalid":g,children:[t.jsx(U,{htmlFor:r.name,children:"Instansi"}),t.jsx(q,{id:r.name,name:r.name,value:r.state.value,onBlur:r.handleBlur,onChange:d=>r.handleChange(d.target.value),"aria-invalid":g,placeholder:"Enter position",autoComplete:"off"}),g&&t.jsx(L,{errors:r.state.meta.errors})]})}})]})}),t.jsxs(dt,{children:[t.jsx(E,{type:"button",onClick:()=>o(!1),children:"Cancel"}),t.jsx(m.Subscribe,{selector:r=>r.isSubmitting,children:r=>t.jsx(E,{type:"submit",form:`employee-form-${n?.id||"new"}`,disabled:r,children:r?"Saving...":"Save"})})]})]})})]})}function Wt(){const e=N(tt),{data:a,isLoading:o}=at({queryKey:["employees"],queryFn:()=>e()});return o?t.jsx("div",{children:"Loading..."}):t.jsx(Vt,{data:a??[]})}export{Wt as component};
